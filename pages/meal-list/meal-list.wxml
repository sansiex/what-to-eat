<!-- pages/meal-list/meal-list.wxml -->
<view class="container">
  <!-- 空状态 -->
  <view wx:if="{{meals.length === 0}}" class="empty-state">
    <text class="empty-text">暂无点餐记录</text>
    <text class="empty-subtext">点击底部"开始点餐"发起新的点餐</text>
  </view>

  <!-- 点餐列表 -->
  <view wx:else class="meal-list">
    <view wx:for="{{meals}}" wx:key="id" class="meal-item">
      <!-- 点餐信息 -->
      <view class="meal-info">
        <view class="meal-header">
          <text class="meal-name">{{item.name}}</text>
          <view class="status-badge {{item.status === 'ordering' ? 'status-ordering' : 'status-closed'}}">
            {{item.status === 'ordering' ? '点餐中' : '已收单'}}
          </view>
        </view>
        <text class="meal-time">开始时间：{{item.formattedCreatedAt}}</text>
        <text class="meal-dishes">菜品数：{{item.dishes.length}} 道</text>
      </view>

      <!-- 操作按钮 -->
      <view class="meal-actions">
        <button class="action-btn btn-edit" bindtap="editMeal" data-id="{{item.id}}">编辑</button>
        <button wx:if="{{item.status === 'ordering'}}" class="action-btn btn-close" bindtap="closeMeal" data-id="{{item.id}}">收单</button>
        <button class="action-btn btn-order" bindtap="goOrder" data-id="{{item.id}}">点餐</button>
      </view>
    </view>
  </view>
</view>