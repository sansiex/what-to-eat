<!-- pages/order-food/order-food.wxml -->
<view class="container">
  <!-- é¤åæ˜¾ç¤º -->
  <view class="section" wx:if="{{currentMeal}}">
    <text style="font-size: 36rpx; font-weight: 600; display: block; margin-bottom: 12rpx;">
      {{currentMeal.name}}
    </text>
    <text style="font-size: 24rpx; color: #999;">
      å‘èµ·æ—¶é—´ï¼š{{currentMeal.formattedCreatedAt}}
    </text>
  </view>
  
  <!-- æœç´¢æ  -->
  <view class="search-bar">
    <text class="search-icon">ğŸ”</text>
    <input 
      class="search-input" 
      placeholder="æœç´¢èœå“" 
      bindinput="onSearch"
      value="{{searchKeyword}}"
    />
  </view>
  
  <!-- èœå“åˆ—è¡¨ -->
  <view class="section">
    <view wx:if="{{!currentMeal}}" style="padding: 40rpx 0; text-align: center; color: #999;">
      æš‚æ— å‘èµ·çš„é¤é£Ÿï¼Œè¯·å…ˆå‘èµ·ä¸€é¤
    </view>
    
    <view wx:elif="{{filteredDishes.length === 0}}" style="padding: 40rpx 0; text-align: center; color: #999;">
      æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„èœå“
    </view>
    
    <view wx:else>
      <checkbox-group bindchange="onCheckboxChange">
        <view wx:for="{{filteredDishes}}" wx:key="id" class="list-item">
          <view style="display: flex; align-items: center; padding: 16rpx 0;">
            <!-- å¤é€‰æ¡† -->
            <checkbox 
              value="{{item.id}}" 
              checked="{{dishSelectionMap[item.id] || false}}"
              style="transform: scale(1.2); margin-right: 16rpx;"
            />
            
            <!-- èœå“ä¿¡æ¯ -->
            <view style="margin-left: 16rpx; flex: 1; display: flex; flex-direction: column;">
              <text class="list-item__title" style="margin-bottom: 8rpx;">{{item.name}}</text>
              <text class="list-item__desc">{{dishOrderersMap[item.id] || 'æš‚æ— ç‚¹é€‰'}}</text>
            </view>
          </view>
        </view>
      </checkbox-group>
    </view>
  </view>
  
  <!-- ä¸‹å•æŒ‰é’® -->
  <button 
    class="btn" 
    bindtap="placeOrder"
    wx:if="{{currentMeal}}"
  >
    ä¸‹å•
  </button>
</view>
