<!-- pages/order-food/order-food.wxml -->
<view class="container">
  <!-- é¤åæ˜¾ç¤º -->
  <view class="section" wx:if="{{currentMeal}}">
    <text style="font-size: 36rpx; font-weight: 600; display: block; margin-bottom: 12rpx;">
      {{currentMeal.name}}
    </text>
    <text style="font-size: 24rpx; color: #999;">
      å‘èµ·æ—¶é—´ï¼š{{formatTime(currentMeal.createdAt)}}
    </text>
  </view>
  
  <!-- æœç´¢æ  -->
  <view class="search-bar">
    <text class="search-icon">ğŸ”</text>
    <input 
      class="search-input" 
      placeholder="æœç´¢èœå“" 
      bindinput="onSearch"
      value="{{searchKeyword}}"
    />
  </view>
  
  <!-- èœå“åˆ—è¡¨ -->
  <view class="section">
    <view wx:if="{{!currentMeal}}" style="padding: 40rpx 0; text-align: center; color: #999;">
      æš‚æ— å‘èµ·çš„é¤é£Ÿï¼Œè¯·å…ˆå‘èµ·ä¸€é¤
    </view>
    
    <view wx:elif="{{filteredDishes.length === 0}}" style="padding: 40rpx 0; text-align: center; color: #999;">
      æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„èœå“
    </view>
    
    <view wx:else>
      <view 
        wx:for="{{filteredDishes}}" 
        wx:key="{{item.id}}" 
        class="list-item"
      >
        <view style="display: flex; align-items: center; flex: 1;">
          <checkbox 
            class="checkbox" 
            checked="{{userSelectedDishes.includes(item.id)}}"
            bindchange="toggleDishSelection"
            data-id="{{item.id}}"
          />
          <view>
            <text class="list-item__title">{{item.name}}</text>
            <text class="list-item__desc">
              {{getDishOrderers(item.id).length > 0 ? 'å·²ç‚¹ï¼š' + getDishOrderers(item.id).join('ã€') : 'æš‚æ— ç‚¹é€‰'}}
            </text>
          </view>
        </view>
      </view>
    </view>
  </view>
  
  <!-- ä¸‹å•æŒ‰é’® -->
  <button 
    class="btn" 
    bindtap="placeOrder"
    wx:if="{{currentMeal}}"
  >
    ä¸‹å•
  </button>
</view>